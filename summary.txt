Objects:
- User: owner of points and rewards (through PointRewardManager)
- PointRewardManager: User's wallet that manage points and rewards
- OrderTransaction: paid proof of purchase. Its amount determines how many Point quantity a user will get (ideally named Transaction, but it conflicts with Rails internal naming. Should have better naming)
- Point: a single Point object issued per transaction (it)
- Reward: X amount of Points / etc can be converted to a Reward


Flow:
- To issue a point to user, client can call PointRewardManager#issue_point(transaction)
- To issue a reward to user, client can call PointRewardManager#issue_reward


Assumption:
- Point is unique per each transaction. Cannot combine 2 or more transactions to create a Point object
- Reward conversion rule can be based by Point or other aspects. It's not strictly related to Points
- Transactions less than $100 would not generate a Point object
- Thus we also need a Transaction object. Some Reward conversion rule are based on Transaction
- Points expire 1 year after its issuance


-----
PointRewardManagerController
- index (listing all users)
- show (listing all points and rewards belong to a User / PointRewardManager)

-----
Model: User
  has_one: PointRewardManager
  has_many: OrderTransactions

  attr: - id
        - name
        - etc
        - loyalty_tier (standard / gold / platinum)


-----
Model: OrderTransaction
  belongs_to: User

  attr: - id
        - amount
        - user_id

-----
Model: PointRewardManager
  belongs_to: User
  has_many: Points
  has_many: Rewards
  has_many: RewardConversionRules

  attr: - id
        - user_id

  method: - issue_points(transaction) # per transaction
          - issue_rewards # triggered after issuing points

-----
Model: Point
  belongs_to: PointRewardManager

  attr: - id
        - type (local / international) --> using STI
        - point_reward_manager_id
        - conversion_dollar #
        - conversion_quantity #
        - transaction_id
        - transaction_amount
        - quantity
        - expiry_date
        - expired (boolean)

-----
Model: Reward
  belongs_to: PointRewardManager
  has_many: RewardConversionRule

  attr: - id
        - type (free_coffee / cash_rebate / free_movie_ticket)
        - point_reward_manager_id
        - name

-----
Model: RewardConversionRule
  belongs_to: PointRewardManager
  belongs_to: Reward

  attr: - reward_id
        - point_reward_manager_id
